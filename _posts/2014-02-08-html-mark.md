---
layout: post
title: IE条件注释
description: IE条件注释
keywords: IE条件注释
---


<div class="articleCot">
    <style type="text/css">
        .articleCot .syntaxhighlighter code{
            color: #008200 !important;
            border: none;
        }
    </style>
    <p style="text-align:center;">
        <img src="http://cms.9tech.cn/uploads/allimg/131226/1053444O4-0.jpg" width="715" alt="t0188a564d3ecacaf78.jpg" title="t0188a564d3ecacaf78.jpg">
    </p>
    <p>
        如果玩过条件注释的，可以忽略以下基础介绍。
    </p>
    <p>
        IE条件注释（Conditional comments）是IE浏览器私有的代码，是一个类似IF判断的语法注释块，IE5之上支持。
    </p>
    <p>
        代码看起来是这样的
    </p>
    <div><div id="highlighter_611144" class="syntaxhighlighter  html"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="html comments">&lt;!--[if IE 6]&gt;</code></div><div class="line number2 index1 alt1"><code class="html comments">你正在使用IE6</code></div><div class="line number3 index2 alt2"><code class="html comments">&lt;![endif]--&gt;</code></div></div></td></tr></tbody></table></div></div>
    <p>
        <span style="line-height:1.5;font-size:10pt;">他的语法是一个普通的HTML注释 &lt;!– comments –&gt;，分支块以 [if 条件(conditional)]&gt; 开始 &lt;![endif]结束。条件和JS中的if很类似，布尔值类型，可以把浏览器特性作为条件，比如IE ，IE 6， IE 7 ，此外还支持 非(!) 、与(&amp;) 、或(|)、 括号、 大于(gt)、 大于等于(gte)、 小于(le) 、 小于等于(lte)。</span>
    </p>
    <p>
        直观的代码如下：
    </p>
    <div><div id="highlighter_45956" class="syntaxhighlighter  html"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="html plain">&lt;</code><code class="html keyword">p</code> <code class="html color1">class</code><code class="html plain">=</code><code class="html string">"accent"</code><code class="html plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="html comments">&lt;!--[if IE]&gt;</code></div><div class="line number3 index2 alt2"><code class="html comments">According to the conditional comment this is IE&lt;br /&gt;</code></div><div class="line number4 index3 alt1"><code class="html comments">&lt;![endif]--&gt;</code></div><div class="line number5 index4 alt2"><code class="html comments">&lt;!--[if IE 6]&gt;</code></div><div class="line number6 index5 alt1"><code class="html comments">According to the conditional comment this is IE 6&lt;br /&gt;</code></div><div class="line number7 index6 alt2"><code class="html comments">&lt;![endif]--&gt;</code></div><div class="line number8 index7 alt1"><code class="html comments">&lt;!--[if IE 7]&gt;</code></div><div class="line number9 index8 alt2"><code class="html comments">According to the conditional comment this is IE 7&lt;br /&gt;</code></div><div class="line number10 index9 alt1"><code class="html comments">&lt;![endif]--&gt;</code></div><div class="line number11 index10 alt2"><code class="html comments">&lt;!--[if IE 8]&gt;</code></div><div class="line number12 index11 alt1"><code class="html comments">According to the conditional comment this is IE 8&lt;br /&gt;</code></div><div class="line number13 index12 alt2"><code class="html comments">&lt;![endif]--&gt;</code></div><div class="line number14 index13 alt1"><code class="html comments">&lt;!--[if IE 9]&gt;</code></div><div class="line number15 index14 alt2"><code class="html comments">According to the conditional comment this is IE 9&lt;br /&gt;</code></div><div class="line number16 index15 alt1"><code class="html comments">&lt;![endif]--&gt;</code></div><div class="line number17 index16 alt2"><code class="html comments">&lt;!--[if gte IE 8]&gt;</code></div><div class="line number18 index17 alt1"><code class="html comments">According to the conditional comment this is IE 8 or higher&lt;br /&gt;</code></div><div class="line number19 index18 alt2"><code class="html comments">&lt;![endif]--&gt;</code></div><div class="line number20 index19 alt1"><code class="html comments">&lt;!--[if lt IE 9]&gt;</code></div><div class="line number21 index20 alt2"><code class="html comments">According to the conditional comment this is IE lower than 9&lt;br /&gt;</code></div><div class="line number22 index21 alt1"><code class="html comments">&lt;![endif]--&gt;</code></div><div class="line number23 index22 alt2"><code class="html comments">&lt;!--[if lte IE 7]&gt;</code></div><div class="line number24 index23 alt1"><code class="html comments">According to the conditional comment this is IE lower or equal to 7&lt;br /&gt;</code></div><div class="line number25 index24 alt2"><code class="html comments">&lt;![endif]--&gt;</code></div><div class="line number26 index25 alt1"><code class="html comments">&lt;!--[if gt IE 6]&gt;</code></div><div class="line number27 index26 alt2"><code class="html comments">According to the conditional comment this is IE greater than 6&lt;br /&gt;</code></div><div class="line number28 index27 alt1"><code class="html comments">&lt;![endif]--&gt;</code></div><div class="line number29 index28 alt2"><code class="html comments">&lt;!--[if !IE]&gt; --&gt;</code></div><div class="line number30 index29 alt1"><code class="html plain">According to the conditional comment this is not IE&lt;</code><code class="html keyword">br</code> <code class="html plain">/&gt;</code></div><div class="line number31 index30 alt2"><code class="html comments">&lt;!-- &lt;![endif]--&gt;</code></div><div class="line number32 index31 alt1"><code class="html plain">&lt;/</code><code class="html keyword">p</code><code class="html plain">&gt;</code></div></div></td></tr></tbody></table></div></div>
    <p>
        <span style="line-height:1.5;font-size:10pt;">更详细的信息可以在微软MSDN文档中查看</span>
    </p>
    <p>
        <a href="http://msdn.microsoft.com/en-us/library/ms537512.aspx" target="_blank">http://msdn.microsoft.com/en-us/library/ms537512.aspx</a>
    </p>
    <p>
        基础介绍完毕，这个东西可以做IE浏览器检测，所以变成了CSS兼容多版本浏览器的方案之一。
    </p>
    <p>
        最普遍使用场景
    </p>
    <div><div id="highlighter_12007" class="syntaxhighlighter  html"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="html comments">&lt;!--[if IE 8]&gt;</code></div><div class="line number2 index1 alt1"><code class="html comments">&lt;link href="ie8.css" rel="stylesheet" type="text/css" media="screen" /&gt;</code></div><div class="line number3 index2 alt2"><code class="html comments">&lt;![endif]--&gt;</code></div><div class="line number4 index3 alt1"><code class="html comments">&lt;!--[if IE 7]&gt;</code></div><div class="line number5 index4 alt2"><code class="html comments">&lt;link href="ie7.css" rel="stylesheet" type="text/css" media="screen" /&gt;</code></div><div class="line number6 index5 alt1"><code class="html comments">&lt;![endif]--&gt;</code></div><div class="line number7 index6 alt2"><code class="html comments">&lt;!--[if lt IE 7]&gt;</code></div><div class="line number8 index7 alt1"><code class="html comments">&lt;link href="ie7lt.css" rel="stylesheet" type="text/css" media="screen" /&gt;</code></div><div class="line number9 index8 alt2"><code class="html comments">&lt;![endif]--&gt;</code></div></div></td></tr></tbody></table></div></div>
    <p>
        <span style="line-height:1.5;font-size:10pt;">既可以解决浏览器差异，还可以保证CSS的标准化，避免了很多私有CSS属性作为hack的方式。</span>
    </p>
    <p>
        可是这样会增加过多的文件加载，维护代码数量也增加，有没有更好的方式?
    </p>
    <p>
        使用场景2
    </p>
    <div><div id="highlighter_331882" class="syntaxhighlighter  html"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="html comments">&lt;!--[if lt IE 7]&gt;&lt;html class="ie6 oldie" lang="zh"&gt;&lt;![endif]--&gt;</code></div><div class="line number2 index1 alt1"><code class="html comments">&lt;!--[if IE 7]&gt;&lt;html class="ie7 oldie" lang="zh"&gt;&lt;![endif]--&gt;</code></div><div class="line number3 index2 alt2"><code class="html comments">&lt;!--[if IE 8]&gt;&lt;html class="ie8 oldie" lang="zh"&gt;&lt;![endif]--&gt;</code></div><div class="line number4 index3 alt1"><code class="html comments">&lt;!--[if gt IE 8]&gt;&lt;!--&gt;</code> <code class="html plain">&lt;</code><code class="html keyword">html</code> <code class="html color1">lang</code><code class="html plain">=</code><code class="html string">"zh"</code><code class="html plain">&gt; </code><code class="html comments">&lt;!--&lt;![endif]--&gt;</code></div></div></td></tr></tbody></table></div></div>
    <p>
        <span style="line-height:1.5;font-size:10pt;">场景1中的问题就解决了。通过选择器的优先级就可以轻松解决差异。</span>
    </p>
    <p>
        有了条件注释，JS也能从总获益，免去的通过JS去判断浏览器类型和版本了。
    </p>
    <p>
        比如：如果你的页面想使用html5标签，条件注释也能发挥作用。
    </p>
    <div><div id="highlighter_172128" class="syntaxhighlighter  html"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="html comments">&lt;!--[if lte IE 8]&gt;</code></div><div class="line number2 index1 alt1"><code class="html comments">&lt;script&gt;</code></div><div class="line number3 index2 alt2"><code class="html comments">(function(){</code></div><div class="line number4 index3 alt1"><code class="html spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="html comments">var e = "abbr,article,aside,audio,canvas,datalist,details,dialog,eventsource,figure,</code></div><div class="line number5 index4 alt2"><code class="html comments">footer,header,hgroup,mark,menu,meter,nav,output,progress,section,time,video".split(','),</code></div><div class="line number6 index5 alt1"><code class="html spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="html comments">i= e.length; </code></div><div class="line number7 index6 alt2"><code class="html spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="html comments">while(i--){</code></div><div class="line number8 index7 alt1"><code class="html spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="html comments">document.createElement(e[i]);</code></div><div class="line number9 index8 alt2"><code class="html spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="html comments">}</code></div><div class="line number10 index9 alt1"><code class="html comments">})();</code></div><div class="line number11 index10 alt2"><code class="html comments">&lt;/script&gt;</code></div><div class="line number12 index11 alt1"><code class="html comments">&lt;![endif]--&gt;</code></div></div></td></tr></tbody></table></div></div>
    <p>
        <span style="line-height:1.5;font-size:10pt;">再比如：IE6的背景图片缓存问题</span>
    </p>
    <div>
	<span style="line-height:1.5;">
<div><div id="highlighter_225633" class="syntaxhighlighter  html"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="html comments">&lt;!--[if IE 6]&gt;</code></div><div class="line number2 index1 alt1"><code class="html comments">&lt;script&gt;</code></div><div class="line number3 index2 alt2"><code class="html comments">document.execCommand("BackgroundImageCache", false, true);</code></div><div class="line number4 index3 alt1"><code class="html comments">&lt;/script&gt;</code></div><div class="line number5 index4 alt2"><code class="html comments">&lt;![endif]--&gt;</code></div></div></td></tr></tbody></table></div></div>
</span>
    </div>
    <p>
        <span style="line-height:1.5;font-size:10pt;">甚至还可以帮助JS直接获取浏览器信息，大多数库和方案识别浏览器都是通过userAgent串处理的，而且大部分的应用场景也是if （IExx） {doxx}</span>
    </p>
    <div><div id="highlighter_249559" class="syntaxhighlighter  js"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="js keyword">function</code> <code class="js plain">isIE(v){</code></div><div class="line number2 index1 alt1"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="js keyword">var</code> <code class="js plain">v = v || </code><code class="js string">""</code><code class="js plain">,</code></div><div class="line number3 index2 alt2"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="js plain">tester = document.createElement(</code><code class="js string">'div'</code><code class="js plain">);</code></div><div class="line number4 index3 alt1"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="js plain">tester.innerHTML = </code><code class="js string">'&lt;!--[if IE '</code> <code class="js plain">+ v + </code><code class="js string">']&gt;&lt;i&gt;&lt;/i&gt;&lt;![endif]--&gt;'</code><code class="js plain">;</code></div><div class="line number5 index4 alt2"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="js keyword">return</code> <code class="js plain">!!tester.getElementsByTagName(</code><code class="js string">'i'</code><code class="js plain">)[0];</code></div><div class="line number6 index5 alt1"><code class="js plain">}</code></div></div></td></tr></tbody></table></div></div>
    <p>
        <span style="line-height:1.5;font-size:10pt;">form:&nbsp;</span><a href="http://ninofocus.com/2011/12/09/ie-browse-detect/" target="_blank" style="line-height:1.5;font-size:10pt;">http://ninofocus.com/2011/12/09/ie-browse-detect/</a>
    </p>
    <p>
        还可以在HTML代码中玩
    </p>
    <div><div id="highlighter_739105" class="syntaxhighlighter  html"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="html plain">&lt;</code><code class="html keyword">body</code><code class="html plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="html comments">&lt;!--[if lte IE 8]&gt;</code></div><div class="line number3 index2 alt2"><code class="html comments">&lt;p&gt;亲爱的用户，您的浏览器版本过低，建议您升级浏览器获得更好的体验....&lt;/p&gt;</code></div><div class="line number4 index3 alt1"><code class="html comments">&lt;![endif]--&gt;</code></div></div></td></tr></tbody></table></div></div>
    <p>
        <span style="line-height:1.5;font-size:10pt;">或许还有更多的玩法，就等待您的发现和分享了。</span>
    </p>
    <p>
        最后，条件注释也不仅限于HTML中，JS也可以有，那就是JScript的特性了，这种坑爹的东东还是少用的好，因为JS中的注释总是要被压缩掉的。
    </p>
    <div><div id="highlighter_472618" class="syntaxhighlighter  js"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="js plain">&lt;script&gt;</code></div><div class="line number2 index1 alt1"><code class="js comments">/*@cc_on</code></div><div class="line number3 index2 alt2"><code class="js spaces">&nbsp;&nbsp;</code><code class="js comments">document.write("You are using IE4 or higher");</code></div><div class="line number4 index3 alt1"><code class="js comments">@*/</code></div><div class="line number5 index4 alt2"><code class="js plain">&lt;/script&gt;</code></div></div></td></tr></tbody></table></div></div>
</div>